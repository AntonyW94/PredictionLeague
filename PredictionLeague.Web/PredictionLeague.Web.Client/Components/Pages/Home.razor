@page "/"

@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject ILogger<Home> Logger

<PageTitle>Home - Premier League Predictions</PageTitle>

<style>
    .hero-section {
        background: linear-gradient(rgba(49, 20, 74, 0.8), rgba(49, 20, 74, 0.8)), url('https://images.unsplash.com/photo-1579952363873-27f3bade9f55?q=80&w=1935&auto=format&fit=crop') no-repeat center center;
        background-size: cover;
        color: white;
        padding: 6rem 0;
        position: relative;
    }

    .diagonal-clip {
        clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
    }

    .feature-icon {
        font-size: 3rem;
        color: var(--pl-green);
    }

    .tick-icon {
        font-size: 1rem;
        color: var(--pl-green);
    }

    .testimonial-card {
        background-color: var(--pl-purple-600);
        border: none;
    }

    .testimonial-card img {
        width: 80px;
        height: 80px;
        object-fit: cover;
    }
</style>

<CascadingAuthenticationState>
    <AuthorizeView>
        <NotAuthorized>
            <div class="hero-section text-center diagonal-clip">
                <div class="container py-5">
                    <img src="/images/logo.png" alt="Prediction League Logo" class="mb-4" style="height: 100px;" />
                    <h1 class="display-4 fw-bold text-white">The Ultimate Premier League Prediction Game</h1>
                    <p class="fs-4 col-md-8 mx-auto">Challenge your friends, prove your football knowledge, and top the leaderboard. Your journey to prediction glory starts here.</p>
                    <div class="d-flex justify-content-center align-items-center mt-4 gap-3">
                        <NavLink class="btn btn-lg blue-light-button px-4" href="authentication/login">Login</NavLink>
                        <NavLink class="btn btn-lg green-button px-4" href="authentication/register">Register</NavLink>
                    </div>
                </div>
            </div>

            <div class="container px-4 py-5">
                <h2 class="text-center fw-bold mb-5">How It Works</h2>
                <div class="row g-4 text-center">
                    <div class="col-md-4">
                        <div class="feature-icon mb-3"><i class="bi bi-pencil-square"></i></div>
                        <h4 class="fw-bold">1. Predict Scores</h4>
                        <p class="text-muted">Submit your score predictions for all 10 Premier League matches each week before the deadline.</p>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-icon mb-3"><i class="bi bi-trophy"></i></div>
                        <h4 class="fw-bold">2. Score Points</h4>
                        <p class="text-muted">Earn 5 points for a perfect score, 3 for the correct result, and climb the weekly, monthly, and overall leaderboards.</p>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-icon mb-3"><i class="bi bi-people-fill"></i></div>
                        <h4 class="fw-bold">3. Compete & Win</h4>
                        <p class="text-muted">Create private leagues to challenge your friends, family, and colleagues for the ultimate bragging rights!</p>
                    </div>
                </div>
            </div>

            <div class="py-5" style="background-color: var(--pl-purple-600);">
                <div class="container px-4">
                    <h2 class="text-center text-white fw-bold mb-5">Why Join Prediction League?</h2>
                    <div class="row align-items-center g-5">
                        <div class="col-lg-6">
                            <img src="https://images.pexels.com/photos/23495488/pexels-photo-23495488.jpeg" class="img-fluid rounded-3 shadow" alt="Friends cheering while watching football on TV" />
                        </div>
                        <div class="col-lg-6 text-white">
                            <h3 class="fw-bold text-white">It's More Than Just a Game</h3>
                            <p>Prediction League adds an extra layer of excitement to every match. It's a season-long battle of wits, luck, and football passion.</p>
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="bi bi-check-circle-fill tick-icon me-2"></i><strong>Free to Play:</strong> Jump into our official public leagues for free.</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill tick-icon me-2"></i><strong>Private Leagues:</strong> Create your own private league with an entry fee and a custom prize structure.</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill tick-icon me-2"></i><strong>Live Leaderboards:</strong> Track your progress in real-time as the results come in.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container px-4 py-5">
                <h2 class="text-center fw-bold mb-5">What Our Players Are Saying</h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card testimonial-card text-white p-4 h-100">
                            <div class="card-body text-center">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" class="rounded-circle mb-3" alt="User testimonial photo">
                                <p class="card-text fst-italic">"This has completely changed how I watch football on the weekend. Every match matters now!"</p>
                                <footer class="blockquote-footer text-white-50 mt-3">Louis L, Northampton</footer>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card testimonial-card text-white p-4 h-100">
                            <div class="card-body text-center">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" class="rounded-circle mb-3" alt="User testimonial photo">
                                <p class="card-text fst-italic">"Our office league has never been more competitive. The banter is brilliant, and the platform is so easy to use."</p>
                                <footer class="blockquote-footer text-white-50 mt-3">Mitch W, Kent</footer>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card testimonial-card text-white p-4 h-100">
                            <div class="card-body text-center">
                                <img src="https://randomuser.me/api/portraits/men/3.jpg" class="rounded-circle mb-3" alt="User testimonial photo">
                                <p class="card-text fst-italic">"Finally beat my dad in our family league last season. Best feeling ever! Can't wait for the new season to start."</p>
                                <footer class="blockquote-footer text-white-50 mt-3">Ross H, Kent</footer>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="py-5" style="background-color: var(--pl-purple-800);">
                <div class="container text-center text-white">
                    <h2 class="fw-bold">Ready to Prove Your Punditry?</h2>
                    <p class="fs-5 my-4 col-md-8 mx-auto">The new season is just around the corner. Create your account, join a league, and start making your predictions today!</p>
                    <NavLink class="btn btn-lg green-button px-5" href="authentication/register">Get Started for Free</NavLink>
                </div>
            </div>
        </NotAuthorized>
    </AuthorizeView>
</CascadingAuthenticationState>

@code {
    protected override async Task OnInitializedAsync()
    {
        Logger.LogInformation("Home page has been loaded.");

        var authenticationState = await AuthenticationStateProvider.GetAuthenticationStateAsync();

        var user = authenticationState.User;
        if (user.Identity?.IsAuthenticated ?? false)
            NavigationManager.NavigateTo("/dashboard");
    }
}
