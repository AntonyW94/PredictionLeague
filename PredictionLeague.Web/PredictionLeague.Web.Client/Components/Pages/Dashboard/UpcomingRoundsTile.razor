<div class="dashboard-card h-100">
    <h3 class="text-white text-center fw-bold mb-4">Upcoming Rounds</h3>

    <ApiError Message="@DashboardState.UpcomingRoundsErrorMessage" />

    @if (DashboardState.IsUpcomingRoundsLoading)
    {
        <p class="text-center text-white"><em>Loading rounds...</em></p>
    }
    else if (!DashboardState.UpcomingRounds.Any())
    {
        <div class="d-flex flex-column align-items-center justify-content-center flex-grow-1">
            <p class="text-white fw-bold text-center">There are currently no upcoming rounds available for you to predict.</p>
        </div>
    }
    else
    {
        <div class="carousel-wrapper carousel--desktop-multi-item">
            <div class="carousel-container">
                @if (_isDesktop && DashboardState.UpcomingRounds.Count > 2)
                {
                    <button class="carousel-btn" @onclick="ShowPrevious" disabled="@(_currentRoundIndex == 0)">
                        <span class="bi bi-chevron-left"></span>
                    </button>
                }

                <div class="rounds-track-wrapper"
                     @ontouchstart="HandleTouchStart"
                     @ontouchmove="HandleTouchMove"
                     @ontouchend="HandleTouchEnd">
                    <div class="rounds-track" style="@_trackStyle">
                        @foreach (var round in DashboardState.UpcomingRounds)
                        {
                            <div class="carousel-item-wrapper">
                                <RoundCard Round="round" />
                            </div>
                        }
                    </div>
                </div>

                @if (_isDesktop && DashboardState.UpcomingRounds.Count > 2)
                {
                    <button class="carousel-btn" @onclick="ShowNext" disabled="@IsAtEnd()">
                        <span class="bi bi-chevron-right"></span>
                    </button>
                }
            </div>

            @if (NumberOfDots > 1)
            {
                <div class="carousel-dots">
                    @for (var i = 0; i < NumberOfDots; i++)
                    {
                        var dotIndex = i;
                        <span class="carousel-dot @(i == _currentRoundIndex ? "active" : "")" @onclick="() => GoToSlide(dotIndex)"></span>
                    }
                </div>
            }
        </div>
    }
</div>